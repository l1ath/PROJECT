<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>p5.js Canvas with Buttons</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
    <style>
        /* Simple styling to align the canvas and buttons */
        #canvas-container {
            text-align: center;
            margin: auto;
        }
    </style>
</head>
<body>
    <div id="canvas-container">
        <!-- Buttons for drawing shapes -->
        <button onclick="drawCircle()">Draw Circle</button>
        <button onclick="drawSquare()">Draw Square</button>
        <button onclick="clearCanvas()">Clear Canvas</button>
    </div>
    <div id="mouse-position">Mouse position: </div>

    <script>
        let canvas;
        let drawingCmds = []; // array 2 store drawing cmds
        let savedState = []; //canvas stat
        let mousePos = null;

        function setup() {
            canvas = createCanvas(500, 500);
            canvas.parent('canvas-container');
            background(240);
        }

        function mousePressed(){
            if (mouseX > 0 && mouseX < width && mouseY > 0 && mouseY < height){
                mousePos = {x: mouseX, y: mouseY};
                document.getElementById('mouse-position').innerText = `Mouse Position: (${mouseX}, ${mouseY})`;
            }
        }

        function exeCmd(command){
            fill(command.color);
            if(command.type == "circle"){
                circle(command.x,command.y, command.size);
            }
            else if(command.type == "square"){
                rect(command.x, command.y, command.size, command.size);
            }
            else if(command.type == "clear"){
                clearCanvas();
            }
        }

        // Function to draw a circle
        window.drawCircle = function() {
            if (mousePos) {
                let command = { type: 'circle', x:mousePos.x, y:mousePos.y, size:50 , color: 'red'};
                drawingCmds.push(command);
                exeCmd(command);
            }
            
        };

        // Function to draw a square
        window.drawSquare = function() {
            if (mousePos) {
                let command = { type: 'square', x:mousePos.x, y:mousePos.y, size:50, color: 'blue'};
                drawingCmds.push(command);
                exeCmd(command);
            }
        };

        // Function to clear the canvas
        window.clearCanvas = function() {
            let command = {type: 'clear'}
            background(240);
        };


    </script>
</body>
</html>

//consider undo redo, push to a stack and then to undo pop off the stack
//undo tree is also something to consider, 